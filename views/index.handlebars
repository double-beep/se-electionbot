<h1>{{{heading}}}</h1>

<base target="_blank" />

{{#with data}}

<blockquote>
    <p>I am <strong><a href="https://github.com/samliew/se-electionbot">ElectionBot</a></strong>, a chatbot that can answer commonly-asked questions about elections for sites on the Stack Exchange network.</p>
    <p>This instance is listening to <strong>{{{url chatRoomUrl}}}</strong>. The current time is {{utcTimestamp utcNow}}.</p>
</blockquote>

<main class="dashboard">

    <section>
        <aside>
            <h2>Election Info</h2>
            {{#with election}}
            <table>
                <tr><td>Last updated</td><td>{{utcTimestamp updated}} <span class="relativetime" title="{{utcTimestamp updated}}"></span></td></tr>
                <tr><td>Site</td><td>{{siteName}}</td></tr>
                <tr><td>Hostname</td><td>{{{url siteUrl @root/data/siteHostname}}}</td></tr>
                <tr><td>Election Title</td><td>{{title}}</td></tr>
                <tr><td>Election URL</td><td>{{{url electionUrl electionUrl}}}</td></tr>
                <tr><td>Election Chat</td>
                    {{#if chatUrl}}
                    <td>{{{url chatUrl}}}</td>
                    {{else}}
                    <td></td>
                    {{/if}}
                </tr>
                <tr><td>Positions</td><td>{{numPositions}}</td></tr>
                <tr><td>Rep. to vote</td><td>{{repVote}}</td></tr>
                <tr><td>Rep. to nominate</td><td>{{repNominate}}</td></tr>
                <tr><td>Current phase</td><td>{{phase}}</td></tr>
                <tr><td>Nomination date</td><td>{{utcTimestamp dateNomination}} <span class="relativetime" title="{{utcTimestamp dateNomination}}"></span></td></tr>
                <tr><td>Primary date</td>
                    {{#if datePrimary}}
                    <td>{{utcTimestamp datePrimary}} <span class="relativetime" title="{{utcTimestamp datePrimary}}"></span></td>
                    {{else}}
                    <td></td>
                    {{/if}}
                </tr>
                <tr><td>Election date</td><td>{{utcTimestamp dateElection}} <span class="relativetime" title="{{utcTimestamp dateElection}}"></span></td></tr>
                <tr><td>End date</td><td>{{utcTimestamp dateEnded}} <span class="relativetime" title="{{utcTimestamp dateEnded}}"></span></td></tr>
                <tr><td>Opavote URL</td><td>{{{url opavoteUrl}}}</td></tr>
                <tr><td>Voter stats</td><td>{{statVoters}}</td></tr>
                <tr><td>Candidates</td>
                    {{#if arrNominees.length}}
                    <td><ul class="list">
                        {{#each arrNominees}}
                        <li class="item"><a href="{{this.permalink}}">{{this.userName}}</a> (<em><a href="{{this.nominationLink}}">nomination</a></em>); score {{this.userScore}}, {{this.userYears}}</li>
                        {{/each}}
                    </ul></td>
                    {{else}}
                    <td></td>
                    {{/if}}
                </tr>
                <tr><td>Winners</td>
                    {{#if arrWinners.length}}
                    <td><ul class="list">
                        {{#each arrWinners}}
                        <li class="item"><a href="{{this.permalink}}">{{this.userName}}</a></li>
                        {{/each}}
                    </ul></td>
                    {{else}}
                    <td></td>
                    {{/if}}
                </tr>
                <tr><td>Badges</td><td>
                    <ul class="list">
                        {{#each electionBadges}}
                        <li class="item">
                            <a href="{{@root/data/siteUrl}}/help/badges/{{this.badge_id}}">{{this.name}}</a> [{{this.badge_id}}]
                            {{#ifCond @root/data/election/isStackOverflow '&&' this.required}}<em>(required)</em>{{/ifCond}}
                        </li>
                        {{/each}}
                    </ul>
                </td></tr>
            </table>
            {{/with}}
        </aside>
    </section>

    <section>
        <aside>
            <h2>Bot Config</h2>
            {{#with botconfig}}
            <table>
                <tr><td>scriptHostname</td><td>{{{url scriptHostname}}}</td></tr>
                <tr><td>scriptInitDate</td><td>{{utcTimestamp scriptInitDate}} <span class="relativetime" title="{{utcTimestamp scriptInitDate}}"></span></td></tr>
                <tr><td>isMuted</td><td>
                    {{{boolean isMuted}}}
                    {{#if isMuted}}
                    <span class="relativetime" title="{{utcTimestamp lastMessageTime}}" data-prefix="ends "></span>
                    {{/if}}
                </td></tr>
                <tr><td>throttleSecs</td><td>{{throttleSecs}} secs</td></tr>
                <tr><td>scrapeIntervalMins</td><td>{{scrapeIntervalMins}} mins</td></tr>
                <tr><td>duplicateResponseText</td><td>{{duplicateResponseText}}</td></tr>
                <tr><td>maxMessageLength</td><td>{{maxMessageLength}}</td></tr>
                <tr><td>maxMessageParts</td><td>{{maxMessageParts}}</td></tr>
                <tr><td>funMode</td><td>{{{boolean funMode}}}</td></tr>
                <tr><td>debug</td><td>{{{boolean debug}}}</td></tr>
                <tr><td>verbose</td><td>{{{boolean verbose}}}</td></tr>
                <tr><td>keepAlive</td><td>{{{boolean keepAlive}}}</td></tr>
                {{#with flags}}
                <tr><td>flags.saidElectionEndingSoon</td><td>{{{boolean saidElectionEndingSoon}}}</td></tr>
                <tr><td>flags.announcedWinners</td><td>{{{boolean announcedWinners}}}</td></tr>
                {{/with}}
            </table>
            {{/with}}
        </aside>

        <aside>
            <h2>Room Activity</h2>
            {{#with botconfig}}
            <table>
                <tr><td>lastActivityTime</td><td>{{utcTimestamp lastActivityTime}} <span class="relativetime" title="{{utcTimestamp lastActivityTime}}"></span></td></tr>
                <tr><td>lastMessageTime</td><td>{{utcTimestamp lastMessageTime}} <span class="relativetime" title="{{utcTimestamp lastMessageTime}}"></span></td></tr>
                <tr><td>lastBotMessage</td><td>
                    <pre>{{lastBotMessage}}</pre>
                    <div class="mt20">{{{lastBotMessageHtml}}}</div>
                </td></tr>
                <tr><td>activityCounter</td><td>{{activityCounter}}</td></tr>
                <tr><td>minActivityCountThreshold</td><td>{{minActivityCountThreshold}}</td></tr>
                <tr><td>roomReachedMinimumActivityCount</td><td>{{{boolean roomReachedMinimumActivityCount}}}</td></tr>
                <tr><td>shortIdleDurationMins</td><td>{{shortIdleDurationMins}} mins</td></tr>
                <tr><td>roomBecameIdleAWhileAgo</td><td>{{{boolean roomBecameIdleAWhileAgo}}}
                    {{#unless roomBecameIdleAWhileAgo}}
                    <span class="relativetime" title="{{utcTimestamp roomBecameIdleAWhileDate}}"></span>
                    {{/unless}}
                </td></tr>
                <tr><td>longIdleDurationHours</td><td>{{longIdleDurationHours}} hours</td></tr>
                <tr><td>roomBecameIdleHoursAgo</td><td>{{{boolean roomBecameIdleHoursAgo}}}
                    {{#unless roomBecameIdleHoursAgo}}
                    <span class="relativetime" title="{{utcTimestamp roomBecameIdleHoursDate}}"></span>
                    {{/unless}}
                </td></tr>
                <tr><td>lowActivityCheckMins</td><td>{{lowActivityCheckMins}} mins</td></tr>
                <tr><td>botHasBeenQuiet</td><td>{{{boolean botHasBeenQuiet}}}
                    {{#unless botHasBeenQuiet}}
                    <span class="relativetime" title="{{utcTimestamp botWillBeQuietDate}}"></span>
                    {{/unless}}
                </td></tr>
                <tr><td>botSentLastMessage</td><td>{{{boolean botSentLastMessage}}}</td></tr>
            </table>
            {{/with}}
        </aside>
    </section>

</main>

<meta http-equiv="refresh" content="{{autoRefreshInterval}}" />

{{/with}}